---
title: OpenAI Go Code
summary: How to use the official OpenAI Go SDK with WorkflowAI. WorkflowAI exposes a compatible OpenAI API endpoint. The only changes you need to make are updating the base URL and API key.
---

```go
package main

import (
	"context"
	"github.com/openai/openai-go"
	"github.com/openai/openai-go/option"
)

func main() {
	// setup WorkflowAI client
	client := openai.NewClient(
		option.WithBaseURL("https://run.workflowai.com/v1"), // [!code highlight]
		option.WithAPIKey("wai-***"), // use create_api_key MCP tool // [!code highlight]
	)

	params := openai.ChatCompletionNewParams{
		Model: openai.ChatModel("gemini-2.5-flash"), // TODO: to be tested, not 100% sure this format works
		Messages: []openai.ChatCompletionMessage{
			{Role: "user", Content: "You are a helpful assistant that analyzes emails and provides a summary of the content. Analyze the following email: {{email}}"},
		},
		// TODO: add structured outputs
		responseFormat: ...
	}

	extraFields := map[string]interface{}{
		// input variables
		"input": map[string]interface{}{
			"email": "Dear team, please review the quarterly report...",
		},
		// I've tried using Metadata: from OpenAI Go SDK, but it didn't work.
		"metadata": map[string]interface{}{
			"agent_id":   "email-analyzer",
			"user_email": "user@example.com",
		},
	}

	params.SetExtraFields(extraFields)

	chatCompletion, err := client.Chat.Completions.New(context.TODO(), params)

	// access response, cost, latency.
	// ..
}
```

**Important:** Make sure to use the latest version of the OpenAI Go SDK for the best compatibility and performance.
